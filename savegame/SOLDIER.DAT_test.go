package savegame

import (
	"encoding/binary"
	"encoding/hex"
	"strings"
	"testing"
	"unicode"

	"github.com/go-restruct/restruct"
	"github.com/stretchr/testify/assert"
)

func loadHex(str string) ([]byte, error) {
	txt := strings.Map(func(r rune) rune {
		if unicode.IsSpace(r) {
			// if the character is a space, drop it
			return -1
		}
		// else keep it in the string
		return r
	}, str)
	return hex.DecodeString(txt)
}

func TestUnpackSoldier(t *testing.T) {
	tests := []struct {
		hexData  string
		expected Soldier
	}{
		{
			`00000000 0100FFFF 00000000 00001400 47756472
			756E2055 6E676572 00000000 00000000 00000000
			00003919 32211635 391A1800 08000000 00000000
			00000000 00000100`,
			Soldier{
				Rank:                        Rookie,
				Base:                        0,
				Craft:                       1,
				CraftBefore:                 -1,
				Missions:                    0,
				Kills:                       0,
				RecoveryDays:                0,
				SoldierValue:                20,
				Name:                        "Gudrun Unger",
				DestinationBase:             0,
				InitialTimeUnits:            57,
				InitialHealth:               25,
				InitialEnergy:               50,
				InitialReactions:            33,
				InitialStrength:             22,
				InitialFiringAccuracy:       53,
				InitialThrowingAccuracy:     57,
				InitialMeleeAccuracy:        26,
				InitialPsionicStrength:      24,
				InitialPsionicSkill:         0,
				InitialBravery:              8,
				TimeUnitImprovement:         0,
				HealthImprovement:           0,
				EnergyImprovement:           0,
				ReactionsImprovement:        0,
				StrengthImprovement:         0,
				FiringAccuracyImprovement:   0,
				ThrowingAccuracyImprovement: 0,
				MeleeAccuracyImprovement:    0,
				BraveryImprovement:          0,
				Armor:                       NoArmor,
				MostRecentPsiLabTraining:    0,
				InPsiLabTraining:            false,
				Promotion:                   false,
				Sex:                         Female,
				Appearance:                  Blonde,
			},
		},
	}
	for _, tt := range tests {
		t.Run(tt.hexData, func(t *testing.T) {
			data, err := loadHex(tt.hexData)
			if err != nil {
				t.Errorf("could not convert test data: %v", err)
			}

			var soldier Soldier
			err = restruct.Unpack(data, binary.LittleEndian, &soldier)
			assert.NoError(t, err, "could not unpack test data: %v", err)

			assert.Equal(t, tt.expected, soldier)

		})
	}
}

func TestFileSoldier_Pack(t *testing.T) {

	hexDump := `
		00000000 0100FFFF 00000000 00001400 47756472 756E2055 6E676572 00000000
		00000000 00000000 00003919 32211635 391A1800 08000000 00000000 00000000
		00000100 00000000 0100FFFF 00000000 00001400 5765726E 65722047 6569736C
		65720000 00000000 00000000 00003522 29352146 3C235200 07000000 00000000
		00000000 00000001 00000000 0100FFFF 00000000 00001400 43617468 6572696E
		65204875 64736F6E 00000000 00000000 00003820 2F35183A 41254100 08000000
		00000000 00000000 00000103 00000000 0100FFFF 00000000 00001400 4E696B6F
		6C616920 566F726F 6E696E00 00000000 00000000 0000371C 3D371F32 38230B00
		06000000 00000000 00000000 00000003 00000000 0100FFFF 00000000 00001400
		54617479 616E6120 4D616C65 65760000 00000000 00000000 00003A22 2A381945
		39184D00 0A000000 00000000 00000000 00000102 00000000 0100FFFF 00000000
		00001400 4E696B6F 6C616920 4B6F726B 69610000 00000000 00000000 00003823
		36272531 47172600 07000000 00000000 00000000 00000000 00000000 0100FFFF
		00000000 00001400 4B617269 6E204573 73657200 00000000 00000000 00000000
		0000381B 452A1D3E 50164400 06000000 00000000 00000000 00000102 00000000
		0100FFFF 00000000 00001400 53617461 2046756A 696D6F74 6F000000 00000000
		00000000 00003425 3D381A2B 45283400 06000000 00000000 00000000 00000100
		FFFF0000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 FFFF0000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 FFFF0000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 FFFF0000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 FFFF0000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 FFFF0000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 FFFF0000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 FFFF0000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		FFFF0000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 FFFF0000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 FFFF0000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 FFFF0000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 FFFF0000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 FFFF0000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 FFFF0000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 FFFF0000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		FFFF0000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 FFFF0000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 FFFF0000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 FFFF0000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 FFFF0000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 FFFF0000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 FFFF0000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 FFFF0000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		FFFF0000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 FFFF0000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 FFFF0000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 FFFF0000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 FFFF0000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 FFFF0000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 FFFF0000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 FFFF0000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		FFFF0000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 FFFF0000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 FFFF0000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 FFFF0000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 FFFF0000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 FFFF0000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 FFFF0000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 FFFF0000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		FFFF0000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 FFFF0000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 FFFF0000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 FFFF0000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 FFFF0000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 FFFF0000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 FFFF0000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 FFFF0000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		FFFF0000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 FFFF0000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 FFFF0000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 FFFF0000 00000000 00000000 00000000 013B0D00
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 FFFF0000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 FFFF0000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 FFFF0000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 FFFF0000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		FFFF0000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 FFFF0000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 FFFF0000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 FFFF0000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 FFFF0000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 FFFF0000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 FFFF0000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 FFFF0000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		FFFF0000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 FFFF0000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 FFFF0000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 FFFF0000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 FFFF0000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 FFFF0000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 FFFF0000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 FFFF0000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		FFFF0000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 FFFF0000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 FFFF0000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 FFFF0000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 FFFF0000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 FFFF0000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 FFFF0000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 FFFF0000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		FFFF0000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 FFFF0000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 FFFF0000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 FFFF0000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 FFFF0000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 FFFF0000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 FFFF0000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 FFFF0000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		FFFF0000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 FFFF0000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 FFFF0000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 FFFF0000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 FFFF0000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 FFFF0000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 FFFF0000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 FFFF0000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		FFFF0000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 FFFF0000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 FFFF0000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 FFFF0000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 FFFF0000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 FFFF0000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 FFFF0000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 FFFF0000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		FFFF0000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 FFFF0000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 FFFF0000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 FFFF0000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 FFFF0000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 FFFF0000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 FFFF0000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 FFFF0000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		FFFF0000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 FFFF0000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 FFFF0000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 FFFF0000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 FFFF0000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 FFFF0000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 FFFF0000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 FFFF0000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		FFFF0000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 FFFF0000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 FFFF0000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 FFFF0000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 FFFF0000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 FFFF0000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 FFFF0000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 FFFF0000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		FFFF0000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 FFFF0000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 FFFF0000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 FFFF0000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 FFFF0000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 FFFF0000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 FFFF0000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 FFFF0000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		FFFF0000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 FFFF0000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 FFFF0000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 FFFF0000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 FFFF0000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 FFFF0000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 FFFF0000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 FFFF0000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		FFFF0000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 FFFF0000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 FFFF0000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 FFFF0000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 FFFF0000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 FFFF0000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 FFFF0000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 FFFF0000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		FFFF0000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 FFFF0000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 FFFF0000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 FFFF0000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 FFFF0000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 FFFF0000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 FFFF0000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 FFFF0000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		FFFF0000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 FFFF0000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 FFFF0000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 FFFF0000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 FFFF0000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 FFFF0000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 FFFF0000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 FFFF0000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		FFFF0000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 FFFF0000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 FFFF0000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 FFFF0000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 FFFF0000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 FFFF0000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 FFFF0000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 FFFF0000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		FFFF0000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 FFFF0000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 FFFF0000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 FFFF0000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 FFFF0000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 FFFF0000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 FFFF0000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 FFFF0000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		FFFF0000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 FFFF0000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 FFFF0000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 FFFF0000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 FFFF0000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 FFFF0000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 FFFF0000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 FFFF0000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		FFFF0000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 FFFF0000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 FFFF0000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 FFFF0000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 FFFF0000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 FFFF0000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 FFFF0000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 FFFF0000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		FFFF0000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 FFFF0000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 FFFF0000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 FFFF0000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 FFFF0000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 FFFF0000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 FFFF0000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 FFFF0000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		FFFF0000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 FFFF0000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 FFFF0000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 FFFF0000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 FFFF0000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 FFFF0000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 FFFF0000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 FFFF0000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		FFFF0000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 FFFF0000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 FFFF0000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 FFFF0000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 FFFF0000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 FFFF0000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 FFFF0000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 FFFF0000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		FFFF0000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 FFFF0000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 FFFF0000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 FFFF0000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 FFFF0000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 FFFF0000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 FFFF0000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 FFFF0000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 A50FF05A 00000000
		FFFF0000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 FFFF0000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 FFFF0000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 FFFF0000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 FFFF0000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 FFFF0000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 FFFF0000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 FFFF0000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		FFFF0000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 FFFF0000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
		00000000 00000000`

	decoded, err := loadHex(hexDump)
	assert.NoError(t, err, "could not decode hex dump")

	var file SOLDIER_DAT
	err = restruct.Unpack(decoded, binary.LittleEndian, &file)
	assert.NoError(t, err, "could not decode data")

	encoded, err := restruct.Pack(binary.LittleEndian, file)
	assert.NoError(t, err, "could not encode data")
	assert.Equal(t, decoded, encoded)
}
